{% extends "base.html" %} {% block title %}Klient - Restauracja XYZ{% endblock
%} {% block content %}
<h1>Witaj, {{ session['username'] }}</h1>
<p>Tu możesz przeglądać i zamawiać dania.</p>

<h2>Koszyk</h2>
<table class="table">
  <thead>
    <tr>
      <th>Zdjęcie</th>
      <th>Nazwa dania</th>
      <th>Opis</th>
      <th>Cena</th>
      <th>Ilość</th>
      <th>Łączny koszt</th>
    </tr>
  </thead>
  <tbody>
    {% for item in session.cart %}
    <tr>
      <td>
        <img
          src="{{ url_for('static', filename='images/' ~ item.image) }}"
          alt="{{ item.name }}"
          class="img-thumbnail"
          style="max-width: 100px"
        />
      </td>
      <td>{{ item.name }}</td>
      <td>{{ item.description }}</td>
      <td>{{ item.price }} PLN</td>
      <td>{{ item.quantity }}</td>
      <td>{{ item.price * item.quantity }} PLN</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<p>
  <strong>Całkowity koszt: {{ calculate_total_cost(session.cart) }} PLN</strong>
</p>
<form method="POST" action="/customer">
  <button type="submit" class="btn btn-primary">Zamów</button>
</form><br><br><br>


<h2>Twoje zamówienia</h2>
<table class="table">
  <thead>
    <tr>
      <th>ID zamówienia</th>
      <th>Pozycje</th>
      <th>Łączny koszt</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    {% for order in orders %}
    <tr>
      <td>{{ order.id }}</td>
      <td>
        <ul>
          {% set items = order.order_items | fromjson %} {% for item in items %}
          <li>{{ item.name }} x{{ item.quantity }} ({{ item.price }} PLN)</li>
          {% endfor %}
        </ul>
      </td>
      <td>{{ order.total_price }} PLN</td>
      <td>{{ order.status }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
